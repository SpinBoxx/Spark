{% extends 'base.html.twig' %}

{% block title %}Mes messages{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('style/messages/messages.css') }}">
{% endblock %}

{% block body %}
    <div class="message-container">
        <table class="table table-striped table-hover mx-5 table-message"  style="width: 94%">
            <tbody>
            {% for message in messages %}
                <tr>
                    <td scope="row">
                        <a href="#">
                            <img src="{{ asset('images/messages/avatar.png') }}" alt="avatar" class="avatar">
                        </a>
                    </td>
                    <td><a  href="#"><h5 class="pt-4 linkDefault" id="name">{{ message.sender.username }}</h5></a></td>
                    <td><a href="#"><p class="pt-4 linkDefault" id="link">{{ message.object }}</p></a></td>
                    <td class="pt-4">
                        <img src="{{ asset('images/messages/trash.png') }}" alt="trash" class="trash" id="{{ message.id }}">
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <script>
        $('.trash').on('click', function (){
            var id = this.id
            $.ajax({
                method: "POST",
                url: "{{ path('messages_delete', {'id' : 1}) }}",
                success: function () {
                    alert('ok')
                }
            })
        })
    </script>

{% endblock %}
